;; -*- mode: lisp; -*-
(in-package :stumpwm)

;; sbclrc gives us quickload
(load (merge-pathnames ".sbclrc" (user-homedir-pathname)))
(ql:quickload :erjoalgo-stumpwmrc)
(swank-start)
(xinitrc-init)
;; TODO remove side-effects from this file
(load
 (merge-pathnames
  "top-map-bindings.lisp"
  (asdf:system-source-directory :erjoalgo-stumpwmrc)))
(init-decorations)
(url-launcher-init)
(text-shortcuts-init)
(init-brightness)
(contacts:contacts-load)
(x-service-start 1959)
(def-thread-start *battery-notification-thread*
  (battery-info-check-notify-loop))
(def-thread-start *sms-fanout-reconnect-thread*
  (sms-fanout-client:reconnect-loop *sms-fanout-ws-address*))
;; (sb-thread:terminate-thread *sms-fanout-reconnect-thread*)
(setf *startup-message* nil)
(startup-apps-run)
